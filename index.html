<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI電影推薦網站</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f7f7f7;
      color: #333;
    }
    header, footer {
      background-color: #000;
      color: #fff;
      text-align: center;
      padding: 20px;
    }
    .container {
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }
    .search-bar input, .filter-bar select {
      padding: 10px;
      font-size: 16px;
      margin: 10px auto;
      display: block;
      width: 90%;
      max-width: 400px;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    .movie-cards {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 20px;
      margin-top: 20px;
    }
    .movie-card {
      background-color: #fff;
      border: 1px solid #ccc;
      border-radius: 4px;
      padding: 15px;
      text-align: center;
      animation: fadeIn 0.6s ease-in;
    }
    @keyframes fadeIn {
      from {opacity: 0; transform: translateY(20px);}
      to {opacity: 1; transform: translateY(0);}
    }
    .movie-card img {
      width: 100%;
      height: auto;
      border-radius: 4px;
    }
    .movie-title {
      font-size: 18px;
      margin: 10px 0;
      color: #000;
    }
    .rating {
      color: #FFD700;
    }
    .recommendation-reason {
      font-size: 14px;
      color: #666;
      margin: 10px 0;
    }
    .favorite-btn {
      padding: 8px 12px;
      border: 1px solid #000;
      background-color: transparent;
      cursor: pointer;
    }
    .favorite-btn.favorited {
      background-color: #000;
      color: #fff;
    }

    @media (max-width: 600px) {
      .movie-title { font-size: 16px; }
      .favorite-btn { font-size: 14px; }
    }
  </style>
</head>
<body>
  <header>
    <h1>AI電影推薦網站</h1>
    <p>根據你的興趣推薦電影</p>
  </header>

  <div class="container">
    <input type="text" id="searchInput" placeholder="搜尋電影...">
    <select id="genreFilter">
      <option value="all">全部</option>
      <option value="sci-fi">科幻</option>
      <option value="drama">劇情</option>
      <option value="romance">愛情</option>
    </select>

    <div class="movie-cards" id="movieList">
      <!-- 真實電影資料 -->
    </div>
  </div>

  <footer>
    <p>&copy; 2025 沈予禾 - AI電影推薦網站</p>
  </footer>

  <script>
    if (!localStorage.getItem("loggedIn")) {
      window.location.href = "login.html";
    }

    const movies = [
      {
        title: "全面啟動",
        genre: "sci-fi",
        rating: "★★★★★",
        reason: "劇情燒腦又緊湊，適合喜歡推理的你。",
        poster: "https://image.tmdb.org/t/p/w300/qmDpIHrmpJINaRKAfWQfftjCdyi.jpg"
      },
      {
        title: "星際效應",
        genre: "sci-fi",
        rating: "★★★★☆",
        reason: "探索宇宙與人性之間的深刻連結。",
        poster: "https://image.tmdb.org/t/p/w300/rAiYTfKGqDCRIIqo664sY9XZIvQ.jpg"
      },
      {
        title: "寄生上流",
        genre: "drama",
        rating: "★★★★☆",
        reason: "社會階級描寫犀利，引人深思。",
        poster: "https://image.tmdb.org/t/p/w300/7IiTTgloJzvGI1TAYymCfbfl3vT.jpg"
      },
      {
        title: "蝙蝠俠",
        genre: "sci-fi",
        rating: "★★★★☆",
        reason: "黑暗風格，適合偵探推理迷。",
        poster: "https://image.tmdb.org/t/p/w300/74xTEgt7R36Fpooo50r9T25onhq.jpg"
      },
      {
        title: "你的名字",
        genre: "romance",
        rating: "★★★☆☆",
        reason: "畫面唯美、情感真摯，青春感滿滿。",
        poster: "https://image.tmdb.org/t/p/w300/q719jXXEzOoYaps6babgKnONONX.jpg"
      }
    ];

    const movieList = document.getElementById("movieList");

    function displayMovies(filter = "all", search = "") {
      movieList.innerHTML = "";
      movies.forEach((movie, index) => {
        if ((filter === "all" || movie.genre === filter) && movie.title.includes(search)) {
          const isFav = localStorage.getItem(`favorite-${index}`) === "true";
          movieList.innerHTML += `
            <div class="movie-card" data-title="${movie.title}" data-genre="${movie.genre}">
              <img src="${movie.poster}" alt="${movie.title}">
              <div class="movie-title">${movie.title}</div>
              <div class="rating">${movie.rating}</div>
              <div class="recommendation-reason">推薦理由：${movie.reason}</div>
              <button class="favorite-btn ${isFav ? 'favorited' : ''}" onclick="toggleFavorite(this, ${index})">
                ${isFav ? '已收藏' : '收藏'}
              </button>
            </div>`;
        }
      });
    }

    function toggleFavorite(button, index) {
      const isFav = button.classList.toggle("favorited");
      button.textContent = isFav ? "已收藏" : "收藏";
      localStorage.setItem(`favorite-${index}`, isFav);
    }

    document.getElementById("searchInput").addEventListener("input", function () {
      displayMovies(document.getElementById("genreFilter").value, this.value.trim());
    });

    document.getElementById("genreFilter").addEventListener("change", function () {
      displayMovies(this.value, document.getElementById("searchInput").value.trim());
    });

    displayMovies();
  </script>
</body>
</html>
